<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            margin: 0; 
            padding: 0; 
            height: 100vh; 
            background: #000; 
            overflow: hidden; 
            font-family: "å¾®è»Ÿé›…é»‘", sans-serif;
        }
        /* çˆ±å¿ƒå°çª—å£æ ·å¼ï¼ˆä¸å˜ï¼‰ */
        .heart-window {
            position: absolute;
            width: 75px;
            height: 30px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        /* å¤§å¤§çš„ç”Ÿæ—¥å¿«æ¨‚ */
        .birthday-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 90px; /* åŠ å¤§å­—ä½“ */
            font-weight: 900;
            color: #FFFF00; /* é‡‘è‰² */
            text-shadow: 0 0 15px #FFA500, 0 0 30px #FF6347, 0 0 45px #FF1493; /* å¢å¼ºå…‰æ™• */
            z-index: 9999;
            opacity: 0;
            transition: opacity 1.5s ease-in-out; /* æ›´æ…¢çš„æ·¡å…¥ï¼Œæ›´æœ‰ä»ªå¼æ„Ÿ */
        }
    </style>
</head>
<body>
    <!-- ç”Ÿæ—¥å¿«æ¨‚å®¹å™¨ -->
    <div class="birthday-text" id="birthdayText">ç”Ÿæ—¥å¿«æ¨‚</div>

    <script>
        // 1. é…ç½®å‚æ•°ï¼ˆå·²ä¿®æ”¹spreadDelayä¸º20msï¼Œæ»¡å±é€Ÿåº¦å˜æ…¢ï¼‰
        const MESSAGES = [
            "ä¿æŒå¥½å¿ƒæƒ…", "å¥½å¥½æ„›è‡ªå·±", "æˆ‘æƒ³ä½ äº†", "å¥½å¥½åƒé£¯",
            "å¤šå–ç†±æ°´", "åˆ«ç†¬å¤œ", "é †é †åˆ©åˆ©", "å¥å¥åº·åº·",
            "å¹³å¹³å®‰å®‰", "æ°¸é æ¼‚äº®", "å¤©å¤©é–‹å¿ƒ", "å¥½é‹é€£é€£",
            "æº«æŸ”ä»¥å¾…", "å¤šç©¿è¡£æœ", "æ²»æ„ˆä¸€åˆ‡", "å…ƒæ°£æ»¿æ»¿",
            "æ°¸é å¯æ„›", "ç”Ÿæ—¥å¿«æ¨‚", "å¿ƒæƒ³äº‹æˆ", "æˆ‘æ„›å¦³"
        ];
        const HEART_COLORS = [
            "#FFB6C1", "#FFC0CB", "#FFA07A", "#FF69B4", "#FFB9D9",
            "#FFE4E1", "#FFD1DC", "#F0E68C", "#98FB98", "#ADD8E6",
            "#E6E6FA", "#F8C8DC", "#FFEBCD", "#FFA500", "#FF7F50",
            "#DDA0DD", "#F0FFF0", "#FAF0E6", "#FFE4B5", "#FFC1C1"
        ];
        const n = 200; // çˆ±å¿ƒçª—å£æ•°é‡
        const scale = Math.min(window.innerWidth, window.innerHeight) / 40; // çˆ±å¿ƒå¤§å°
        const upOffset = 100; // ä¸Šç§»åç§»é‡
        const delay = 20; // çˆ±å¿ƒç”Ÿæˆé—´éš”ï¼ˆmsï¼‰
        const spreadCount = 400; // æ»¡å±æ•°é‡
        // ğŸ‘‡ æ ¸å¿ƒä¿®æ”¹ï¼šä»5msæ”¹æˆ20msï¼Œæ»¡å±æ‰©æ•£é€Ÿåº¦å˜æ…¢4å€ï¼Œæ…¢æ…¢é“ºæ»¡
        const spreadDelay = 20; 

        // å­˜å‚¨çª—å£å®ä¾‹
        let heartWins = [];
        let spreadWins = [];
        const birthdayText = document.getElementById("birthdayText");

        // 2. åˆ›å»ºçˆ±å¿ƒçª—å£å‡½æ•°ï¼ˆä¸å˜ï¼‰
        function createHeartWindow(x, y, text, type = "heart") {
            const div = document.createElement("div");
            div.className = "heart-window";
            div.textContent = text;
            div.style.left = `${x}px`;
            div.style.top = `${y}px`;
            div.style.backgroundColor = HEART_COLORS[Math.floor(Math.random() * HEART_COLORS.length)];
            document.body.appendChild(div);
            if (type === "heart") heartWins.push(div);
            else spreadWins.push(div);
            return div;
        }

        // 3. é€æ­¥ç”Ÿæˆçˆ±å¿ƒï¼ˆä¸å˜ï¼‰
        function generateHeartStepByStep(index = 0, callback) {
            if (index >= n) {
                callback();
                return;
            }
            
            const t = (index / n) * 2 * Math.PI;
            const x = window.innerWidth / 2 + scale * (16 * Math.sin(t) ** 3);
            const y = (window.innerHeight / 2 - upOffset) - scale * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
            const text = MESSAGES[Math.floor(Math.random() * MESSAGES.length)];
            createHeartWindow(x, y, text, "heart");
            
            setTimeout(() => {
                generateHeartStepByStep(index + 1, callback);
            }, delay);
        }

        // 4. é€æ­¥æ»¡å±æ‰©æ•£ï¼ˆæ…¢èŠ‚å¥ï¼‰
        function spreadFullScreenStepByStep(index = 0, callback) {
            if (index >= spreadCount) {
                callback();
                return;
            }
            
            const x = Math.random() * (window.innerWidth - 75);
            const y = Math.random() * (window.innerHeight - 30);
            const text = MESSAGES[Math.floor(Math.random() * MESSAGES.length)];
            createHeartWindow(x, y, text, "spread");
            
            setTimeout(() => {
                spreadFullScreenStepByStep(index + 1, callback);
            }, spreadDelay);
        }

        // 5. æ¸…ç©ºæ»¡å±å°çª—å£ï¼ˆä¿ç•™é»‘è‰²èƒŒæ™¯ï¼‰
        function clearSpreadWindows() {
            spreadWins.forEach(win => win && win.remove());
            spreadWins = [];
        }

        // 6. æ˜¾ç¤ºå¤§å¤§çš„ç”Ÿæ—¥å¿«æ¨‚
        function showBirthdayText() {
            birthdayText.style.opacity = 1;
        }

        // 7. ä¸»æµç¨‹ï¼ˆæ»¡å±â†’æ¸…ç©ºâ†’æ˜¾ç¤ºå¤§æ–‡å­—ï¼‰
        function mainAnimation() {
            // æ­¥éª¤1ï¼šé€æ­¥ç”Ÿæˆçˆ±å¿ƒ â†’ åœç•™2ç§’
            generateHeartStepByStep(0, () => {
                setTimeout(() => {
                    // æ­¥éª¤2ï¼šåˆ é™¤çˆ±å¿ƒçª—å£
                    heartWins.forEach(win => win && win.remove());
                    heartWins = [];
                    // æ­¥éª¤3ï¼šæ…¢æ…¢æ»¡å±æ‰©æ•£ â†’ æ‰©æ•£å®Œæˆåæ‰§è¡Œåç»­æ“ä½œ
                    spreadFullScreenStepByStep(0, () => {
                        setTimeout(() => {
                            clearSpreadWindows(); // å…ˆæ¸…ç©ºæ‰€æœ‰æ»¡å±å°çª—å£
                            setTimeout(() => {
                                showBirthdayText(); // æ¸…ç©ºåè¿‡æ¸¡ï¼Œæ˜¾ç¤ºå¤§æ–‡å­—
                            }, 300);
                        }, 800); // æ»¡å±æ•ˆæœåœç•™0.8ç§’ï¼ˆå› ä¸ºæ‰©æ•£å˜æ…¢ï¼Œåœç•™ä¹…ä¸€ç‚¹æ›´åè°ƒï¼‰
                    });
                }, 2000); // çˆ±å¿ƒç”Ÿæˆååœç•™2ç§’
            });
        }

        // å¯åŠ¨åŠ¨ç”»ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰
        mainAnimation();
    </script>
</body>
</html>