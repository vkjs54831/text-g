<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生日</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            margin: 0; 
            padding: 0; 
            height: 100vh; 
            background: #000; 
            overflow: hidden; 
            font-family: "微软雅黑", sans-serif;
        }
        /* 爱心小窗口样式 */
        .heart-window {
            position: absolute;
            width: 75px;
            height: 30px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        /* 大大的生日快乐样式 */
        .birthday-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 120px;
            font-weight: 900;
            color: #FFFF00; /* 黄色 */
            text-shadow: 0 0 15px #FFA500, 0 0 30px #FF6347, 0 0 45px #FF1493;
            z-index: 9999;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }
        /* 开始按钮样式 */
        .start-btn {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px;
            font-size: 24px;
            font-weight: bold;
            color: #000;
            background: #FFFF00;
            border: none;
            border-radius: 50px;
            box-shadow: 0 0 15px #FFA500, 0 0 30px rgba(255, 165, 0, 0.5);
            cursor: pointer;
            z-index: 10000;
            transition: all 0.3s ease;
        }
        .start-btn:hover {
            background: #FFD700; /* 金色 */
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 0 0 20px #FFA500, 0 0 40px rgba(255, 165, 0, 0.7);
        }
    </style>
</head>
<body>
    <!-- 生日快乐容器 -->
    <div class="birthday-text" id="birthdayText">生日快樂</div>
    <!-- 开始按钮 -->
    <button class="start-btn" id="startBtn">點擊開始！</button>

    <script>
        // 配置参数（已设置上移30px+左移20px）
        const MESSAGES = [
            "保持好心情", "好好愛自己", "我想你了", "好好吃飯",
            "多喝熱水", "别熬夜", "順順利利", "健健康康",
            "平平安安", "永遠漂亮", "天天開心", "好運連連",
            "溫柔以待", "多穿衣服", "治愈一切", "元氣满满",
            "永遠可愛", "生日快樂", "心想事成", "我愛妳"
        ];
        const HEART_COLORS = [
            "#FFB6C1", "#FFC0CB", "#FFA07A", "#FF69B4", "#FFB9D9",
            "#FFE4E1", "#FFD1DC", "#F0E68C", "#98FB98", "#ADD8E6",
            "#E6E6FA", "#F8C8DC", "#FFEBCD", "#FFA500", "#FF7F50",
            "#DDA0DD", "#F0FFF0", "#FAF0E6", "#FFE4B5", "#FFC1C1"
        ];
        const n = 200;
        const scale = Math.min(window.innerWidth, window.innerHeight) / 40;
        const upOffset = 30; // 上移30px（数值越大越靠上）
        const leftOffset = 20; // 左移20px（数值越大越靠左）
        const delay = 20;
        const spreadCount = 400;
        const spreadDelay = 20;

        // 存储元素实例
        let heartWins = [];
        let spreadWins = [];
        const birthdayText = document.getElementById("birthdayText");
        const startBtn = document.getElementById("startBtn");

        // 创建爱心窗口函数
        function createHeartWindow(x, y, text, type = "heart") {
            const div = document.createElement("div");
            div.className = "heart-window";
            div.textContent = text;
            div.style.left = `${x}px`;
            div.style.top = `${y}px`;
            div.style.backgroundColor = HEART_COLORS[Math.floor(Math.random() * HEART_COLORS.length)];
            document.body.appendChild(div);
            if (type === "heart") heartWins.push(div);
            else spreadWins.push(div);
            return div;
        }

        // 逐步生成爱心（已上移+左移）
        function generateHeartStepByStep(index = 0, callback) {
            if (index >= n) {
                callback();
                return;
            }
            const t = (index / n) * 2 * Math.PI;
            // 左移：x坐标减去leftOffset；上移：通过upOffset实现
            const x = (window.innerWidth / 2 - leftOffset) + scale * (16 * Math.sin(t) ** 3);
            const y = (window.innerHeight / 2 - upOffset) - scale * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
            const text = MESSAGES[Math.floor(Math.random() * MESSAGES.length)];
            createHeartWindow(x, y, text, "heart");
            setTimeout(() => {
                generateHeartStepByStep(index + 1, callback);
            }, delay);
        }

        // 逐步满屏扩散
        function spreadFullScreenStepByStep(index = 0, callback) {
            if (index >= spreadCount) {
                callback();
                return;
            }
            const x = Math.random() * (window.innerWidth - 75);
            const y = Math.random() * (window.innerHeight - 30);
            const text = MESSAGES[Math.floor(Math.random() * MESSAGES.length)];
            createHeartWindow(x, y, text, "spread");
            setTimeout(() => {
                spreadFullScreenStepByStep(index + 1, callback);
            }, spreadDelay);
        }

        // 清空所有生成的元素
        function clearAllElements() {
            // 清除爱心和满屏元素
            heartWins.forEach(win => win && win.remove());
            spreadWins.forEach(win => win && win.remove());
            heartWins = [];
            spreadWins = [];
            // 隐藏生日快乐文字
            birthdayText.style.opacity = 0;
        }

        // 显示大大的生日快乐，并设置12秒后重置
        function showBirthdayTextAndReset() {
            birthdayText.style.opacity = 1;
            // 12秒后重置到初始画面
            setTimeout(() => {
                clearAllElements();
                startBtn.style.display = "block"; // 重新显示开始按钮
            }, 12000); // 12000毫秒 = 12秒
        }

        // 主流程（点击按钮触发）
        function mainAnimation() {
            // 隐藏按钮
            startBtn.style.display = "none";
            
            // 动画流程：生成爱心 → 清空 → 满屏扩散 → 显示生日快乐并等待重置
            generateHeartStepByStep(0, () => {
                setTimeout(() => {
                    heartWins.forEach(win => win && win.remove());
                    heartWins = [];
                    spreadFullScreenStepByStep(0, () => {
                        setTimeout(() => {
                            clearAllElements(); // 先清空满屏元素
                            setTimeout(() => {
                                showBirthdayTextAndReset(); // 显示生日快乐并启动12秒倒计时
                            }, 300);
                        }, 1000);
                    });
                }, 2000);
            });
        }

        // 绑定按钮点击事件
        startBtn.addEventListener("click", mainAnimation);
    </script>
</body>
</html>
